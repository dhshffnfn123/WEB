<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>17_WebStorage.html</title>
    <style>
        #board {
            border: cornflowerblue solid 5px;
            font-size: 20px;
            font-weight: bold;
            height: 200px;
            width: 300px;
            margin: auto;
            text-align: center;
            box-shadow: seagreen 0 0 30px;
        }

        #result {
            padding-top: 20px;
            padding-bottom: 30px;
        }

        #score {
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
    </style>
</head>
<body>

    <h3># Web Storage API</h3>

    <ul>
        <li>웹 브라우저에서 제공하는 약간의 저장 공간</li>
        <li>사용자의 웹 브라우저에 웹 페이지를 운용하는데 필요한 약간의 데이터를 저장해둘 수 있다</li>
        <li>Key:Value 형태</li>
        <li>로컬 스토리지는 웹 브라우저를 종료하더라도 데이터가 유지된다</li>
        <li>세션 스토리지는 웹 브라우저를 종료하면 데이터가 삭제된다</li>
    </ul>

    <hr>

    <h3># anyGame</h3>


    <ol>
        <li>자바스크립트로 동작하는 아무 게임을 하나 만든다</li>
        <li>로컬 스토리지에 사용자 이름과 전적이 저장된다</li>
        <li>다시 접속하더라도 저장된 데이터를 이용하여 게임이 이어서 진행되도록 만들어보세요</li>
    </ol>
    
    <div id="board">Play the Game!
        <div id="result">결과는?! 두구두구두구두구</div>
        <button id="odd">홀</button>
        <button id="even">짝</button>
        <button id="ten">10점 내기?</button>
        <button id="hundred">100?</button>
        <div id="score"></div>
    </div>
    
    <script>
        var result = Math.floor(Math.random() * 10 + 1);
        var bonusGame = 0;
        
        console.log(result);
        
        var score = localStorage.getItem("score");
        var box = document.getElementById('result');
        var scoreBox = document.getElementById('score');
        
        
        
        //const totalScore = localStorage.getItem("score");
        
        
        const oddBtn = document.querySelector("#odd");
        const evenBtn = document.querySelector("#even");
        const tenBtn = document.querySelector("#ten");
        const hunBtn = document.querySelector("#hundred");

        oddBtn.addEventListener('click', (e) => {
            selectOdd();
        });
        evenBtn.addEventListener('click', (e) => {
            selectEven();
        });
        tenBtn.addEventListener('click', (e) => {
            selectTen();
        });
        hunBtn.addEventListener('click', (e) => {
            selectHundred();
        })
        
        function selectOdd() {
            if(result % 2 == 1) {
            switch(bonusGame) {
                case 1 : 
                    box.innerHTML = '정답입니다!!'
                    score += 10;
                    data = localStorage.setItem("score", score);
                    scoreBox.innerHTML = 'score : ' +  score;
                    result = Math.floor(Math.random() * 10 + 1);
                    bonusGame = 0;
                    document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                    break;
                case 2 :
                    box.innerHTML = '정답입니다!!'
                    score += 100;
                    data = localStorage.setItem("score", score);
                    scoreBox.innerHTML = 'score : ' +  score;
                    result = Math.floor(Math.random() * 10 + 1);
                    bonusGame = 0;
                    document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                    break;
                case 0 :
                    box.innerHTML = '정답입니다!!'
                    score++;
                    scoreBox.innerHTML = 'score : ' +  score;
                    data = localStorage.setItem("score", score);
                    result = Math.floor(Math.random() * 10 + 1);
                    document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                    break;
                }
                } else {
                switch(bonusGame) {
                    case 1 : 
                        box.innerHTML = '틀렸습니다!!'
                        score -= 10;
                        data = localStorage.setItem("score", score);
                        scoreBox.innerHTML = 'score : ' +  score;
                        result = Math.floor(Math.random() * 10 + 1);
                        bonusGame = 0;
                        document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                        break;
                    case 2 :
                        box.innerHTML = '틀렸습니다!!'
                        score -= 100;
                        data = localStorage.setItem("score", score);
                        scoreBox.innerHTML = 'score : ' +  score;
                        result = Math.floor(Math.random() * 10 + 1);
                        bonusGame = 0;
                        document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                        break;
                    case 0 :
                        box.innerHTML = '틀렸습니다!!'
                        score--;
                        scoreBox.innerHTML = 'score : ' +  score;
                        data = localStorage.setItem("score", score);
                        result = Math.floor(Math.random() * 10 + 1);
                        document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                        break;
                    }
        }
    }
        function selectEven() {
            if(result % 2 == 0) {
                switch(bonusGame) {
                case 1 : 
                    box.innerHTML = '정답입니다!!'
                    score += 10;
                    data = localStorage.setItem("score", score);
                    scoreBox.innerHTML = 'score : ' +  score;
                    result = Math.floor(Math.random() * 10 + 1);
                    bonusGame = 0;
                    document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                    break;
                case 2 :
                    box.innerHTML = '정답입니다!!'
                    score += 100;
                    data = localStorage.setItem("score", score);
                    scoreBox.innerHTML = 'score : ' +  score;
                    result = Math.floor(Math.random() * 10 + 1);
                    bonusGame = 0;
                    document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                    break;
                case 0 :
                    box.innerHTML = '정답입니다!!'
                    score++;
                    scoreBox.innerHTML = 'score : ' +  score;
                    data = localStorage.setItem("score", score);
                    result = Math.floor(Math.random() * 10 + 1);
                    document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                    break;
                }
                } else {
                switch(bonusGame) {
                    case 1 : 
                        box.innerHTML = '틀렸습니다!!'
                        score -= 10;
                        data = localStorage.setItem("score", score);
                        scoreBox.innerHTML = 'score : ' +  score;
                        result = Math.floor(Math.random() * 10 + 1);
                        bonusGame = 0;
                        document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                        break;
                    case 2 :
                        box.innerHTML = '틀렸습니다!!'
                        score -= 100;
                        data = localStorage.setItem("score", score);
                        scoreBox.innerHTML = 'score : ' +  score;
                        result = Math.floor(Math.random() * 10 + 1);
                        bonusGame = 0;
                        document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                        break;
                    case 0 :
                        box.innerHTML = '틀렸습니다!!'
                        score--;
                        scoreBox.innerHTML = 'score : ' +  score;
                        data = localStorage.setItem("score", score);
                        result = Math.floor(Math.random() * 10 + 1);
                        document.getElementById('board').style.boxShadow = 'seagreen 0 0 30px';
                        break;
                    }
        }
    }
        function selectTen() {
            bonusGame = 1;
            document.getElementById('board').style.boxShadow = '0 0 50px orange';
        }
        function selectHundred() {
            bonusGame = 2;
            document.getElementById('board').style.boxShadow = '0 0 100px red';
        }

       
            
        

        




        
        (function () {
            const user_name = localStorage.getItem("name");
            const data = localStorage.getItem("score");
            if (user_name == null) {
                alert("첫 방문을 환영합니다");
                localStorage.setItem("name", prompt("당신의 이름을 입력해주세요"));
            } else {
                alert(`${user_name}님 환영합니다!`);
                alert(`당신의 현재 점수는${data}입니다`);
            }
        })(); 
    </script>
    
</body>
</html>